-- åªåŠ è½½ä¸€æ¬¡ WindUIï¼Œä½¿ç”¨å¯é çš„é“¾æ¥
local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()

-- ====== ç”¨æˆ·åæ£€æµ‹ç³»ç»Ÿ ======
-- ã€æ ‡è®°ã€‘è¿™é‡Œå¯ä»¥æ·»åŠ /ä¿®æ”¹å…è®¸çš„ç”¨æˆ·ååˆ—è¡¨
local allowedUsernames = {
    "lingxiaoge6",  -- ä¸»è¦ç”¨æˆ·å
    "yggcxfchbj",
    "sjdjdnddkn",
    "1q2wqqqqqqqqw",
    -- å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ æ›´å¤šç”¨æˆ·åï¼Œä¾‹å¦‚ï¼š
    -- "User2",
    -- "Player3",
}

-- ç”¨æˆ·åå¯¹åº”çš„èŒä½é…ç½®
local userPositions = {
    ["lingxiaoge6"] = "å‰¯å›¢é•¿", 
    ["yggcxfchbj"] = "1åˆ†é˜Ÿé˜Ÿé•¿",
    ["sjdjdnddkn"] = "4åˆ†é˜Ÿé˜Ÿé•¿",
    ["1q2wqqqqqqqqw"] = "å†›å›¢å®¢äºº",
    -- æŒ‡å®šç”¨æˆ·åçš„èŒä½
    -- å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ æ›´å¤šç”¨æˆ·çš„èŒä½é…ç½®ï¼Œä¾‹å¦‚ï¼š
    -- ["User2"] = "æ™®é€šæˆå‘˜",
    -- ["Player3"] = "ç®¡ç†å‘˜",
}

-- è·å–å½“å‰ç”¨æˆ·å
local currentUsername = game.Players.LocalPlayer.Name

-- æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦åœ¨å…è®¸åˆ—è¡¨ä¸­
local function isUserAllowed()
    for _, allowedName in ipairs(allowedUsernames) do
        if currentUsername == allowedName then
            return true
        end
    end
    return false
end

-- è·å–ç”¨æˆ·èŒä½ï¼ˆå¦‚æœæœªé…ç½®åˆ™è¿”å›é»˜è®¤èŒä½ï¼‰
local function getUserPosition(username)
    return userPositions[username] or "å†›å›¢æˆå‘˜"  -- é»˜è®¤èŒä½
end

-- å¦‚æœä¸æ˜¯å†›å›¢æˆå‘˜ï¼Œæ‰§è¡Œè¸¢å‡ºæ“ä½œ
if not isUserAllowed() then
    -- æ˜¾ç¤ºè¸¢å‡ºé€šçŸ¥
    WindUI:Notify({
        Title = "Atrumix - è®¿é—®è¢«æ‹’ç»",
        Content = "ä½ ä¸æ˜¯å†›å›¢æˆå‘˜\nYou're not a Legionnaire",
        Duration = 5,
        Position = "Center",
        Icon = "ban",
        Color = Color3.fromRGB(220, 20, 60) -- çº¢è‰²
    })
    
    -- ç­‰å¾…2ç§’åè¸¢å‡º
    wait(2)
    
    -- è¸¢å‡ºæœåŠ¡å™¨
    game.Players.LocalPlayer:Kick("ä½ ä¸æ˜¯å†›å›¢æˆå‘˜ | You're not a Legionnaire")
    return -- åœæ­¢æ‰§è¡Œåç»­è„šæœ¬
end

-- ====== æ­£å¸¸è„šæœ¬æ‰§è¡Œï¼ˆåªæœ‰é€šè¿‡ç”¨æˆ·åæ£€æµ‹çš„ç”¨æˆ·æ‰èƒ½åˆ°è¾¾è¿™é‡Œï¼‰=====

-- åˆ›å»ºé«˜çº§é€šçŸ¥å‡½æ•°
function showAdvancedNotification(title, description, duration)
    -- ä½¿ç”¨ WindUI çš„é€šçŸ¥ç³»ç»Ÿ
    WindUI:Notify({
        Title = title,
        Content = description,
        Duration = duration or 5, -- é»˜è®¤5ç§’
        Position = "BottomLeft", -- å·¦ä¸‹è§’
        CloseAnimation = "SlideOut", -- æ»‘åŠ¨å…³é—­
        OpenAnimation = "SlideIn", -- æ»‘åŠ¨æ‰“å¼€
        Icon = "info-circle", -- å›¾æ ‡
        Color = Color3.fromRGB(80, 120, 200) -- ä¸»é¢˜è‰²
    })
end

-- æ˜¾ç¤ºæ¬¢è¿å›å®¶çš„é€šçŸ¥ï¼ˆæ ¹æ®ç”¨æˆ·åæ˜¾ç¤ºä¸åŒèŒä½ï¼‰
local userPosition = getUserPosition(currentUsername)

-- ä¸ºç‰¹æ®Šç”¨æˆ·æ·»åŠ æ ‡è®°
local specialMark = ""
if currentUsername == "lingxiaoge6" then
    specialMark = "â­ "  -- ä¸º lingxiaoge6 æ·»åŠ æ˜Ÿæ˜Ÿæ ‡è®°
end

-- æ˜¾ç¤ºæ¬¢è¿é€šçŸ¥
WindUI:Notify({
    Title = "æ¬¢è¿å›å®¶",
    Content = string.format("ç”¨æˆ·å: %s\nèŒä½: %s%s", 
        currentUsername, 
        specialMark, 
        userPosition
    ),
    Duration = 6,
    Position = "BottomRight",
    Icon = "user-check",
    Color = Color3.fromRGB(50, 205, 50), -- ç»¿è‰²è¡¨ç¤ºæˆåŠŸ
    CloseAnimation = "FadeOut",
    OpenAnimation = "FadeIn"
})

-- å…ˆå®šä¹‰ä¸»UIåˆ›å»ºå‡½æ•°
function createAtrumixUI()
    local Window = WindUI:CreateWindow({
        Title = "Atrumixï½œä¸»é¡µé¢",
        Folder = "Atrumix",
        Size = UDim2.fromOffset(450, 400), -- å¢åŠ çª—å£å¤§å°ä»¥å®¹çº³æ›´å¤šå†…å®¹
    })
    
    -- åŠ è½½é€šçŸ¥ç³»ç»Ÿï¼ˆå¤‡ç”¨ï¼‰
    local NotificationHolder = loadstring(game:HttpGet("https://raw.githubusercontent.com/BocusLuke/UI/main/STX/Module.Lua"))()
    local Notification = loadstring(game:HttpGet("https://raw.githubusercontent.com/BocusLuke/UI/main/STX/Client.Lua"))()
    
    -- æ˜¾ç¤ºæ¬¢è¿é€šçŸ¥
    showAdvancedNotification("Atrumix", "æ‰§è¡ŒæˆåŠŸ", 3)
    showAdvancedNotification("Atrumix", "æ„Ÿè°¢æ‚¨ä½¿ç”¨áµƒáµ—Ê³áµ˜áµâ±Ë£", 3)
    showAdvancedNotification("Atrumix", "æœ¬è„šæœ¬ä»…é™å¢¨é¾™â€–å‡Œéœ„å†›å›¢ä½¿ç”¨", 3)
    showAdvancedNotification("Atrumix", "ä½œè€…ï¼šå—çƒ›    è„šæœ¬ç”±æˆ‘ä¸€äººåˆ¶ä½œï¼Œæ‰€ä»¥æ›´æ–°é€Ÿåº¦æ…¢", 4)
    
    -- åˆ›å»ºé€‰é¡¹å¡
    local MainTab = Window:Tab({
        Title = "é€šç”¨",
        Icon = "house",
    })
    
    local ServerTab = Window:Tab({
        Title = "é€‰æ‹©æœåŠ¡å™¨",
        Icon = "server",
    })
    
    local IfonTab = Window:Tab({
        Title = "å…¶ä»–è„šæœ¬",
        Icon = "code",
    })
    
    local InfoTab = Window:Tab({
        Title = "ä¿¡æ¯",
        Icon = "info",
    })
    
    -- ===== é€šç”¨é€‰é¡¹å¡å†…å®¹ =====
    MainTab:Section({
        Title = "æ„Ÿè°¢æ‚¨ä½¿ç”¨Atrumix",
    })
    
    MainTab:Button({
        Title = "é‡æ–°è¿›å…¥æœåŠ¡å™¨",
        Callback = function()
            local LocalPlayer = game.Players.LocalPlayer
            game:GetService("TeleportService"):TeleportToPlaceInstance(game.PlaceId, game.JobId, LocalPlayer)
        end,
    })
    
    MainTab:Button({
        Title = "é£è¡Œv3",
        Callback = function()
            loadstring(game:HttpGet('https://raw.githubusercontent.com/nznb520/Atrumix/d320a26c34e6d73048a3e0ba466088bf79f83430/%E9%A3%9E%E8%A1%8C'))()
        end,
    })
    
    -- ===== é€‰æ‹©æœåŠ¡å™¨é€‰é¡¹å¡å†…å®¹ =====
    ServerTab:Section({
        Title = "æ¸¸æˆè„šæœ¬",
    })
    
    ServerTab:Button({
        Title = "å…ƒç´ åŠ›é‡å¤§äº¨",
        Callback = function()
            loadstring(game:HttpGet('https://raw.githubusercontent.com/nznb520/Atrumix/042524fac05940b1b1a9389a0bbb9572441b1bc3/%E5%85%83%E7%B4%A0%E5%8A%9B%E9%87%8F%E5%A4%A7%E4%BA%A8'))()
        end,
    })
    
    ServerTab:Button({
        Title = "99å¤œ",
        Callback = function()
            loadstring(game:HttpGet('https://raw.githubusercontent.com/nznb520/Atrumix/cca264ca9a72738d7d0f51b3e5bd31a764e9d0ec/99%E5%A4%9C'))()
        end,
    })
    
    ServerTab:Button({
        Title = "é±¼",
        Callback = function()
            loadstring(game:HttpGet('https://raw.githubusercontent.com/nznb520/Atrumix/881626be7e7cc72ac677c9cf375f3cb8c794eb55/%E9%B1%BC'))()
        end,
    })
    
    ServerTab:Button({
        Title = "åˆ€åˆƒçƒ",
        Callback = function()
            loadstring(game:HttpGet('https://raw.githubusercontent.com/nznb520/Atrumix/b71ce91c007fd0cc5e3866c8c13ef8ee13ac17a9/%E5%88%80%E5%88%83%E7%90%83'))()
        end,
    })
    
    ServerTab:Button({
        Title = "ç§æ¤èŠ±å›­",
        Callback = function()
            loadstring(game:HttpGet('https://raw.githubusercontent.com/nznb520/Atrumix/045a07f1bbe87ad4d96f2ba8f2ab015db004bf20/%E7%A7%8D%E6%A4%8D%E8%8A%B1%E5%9B%AD'))()
        end,
    })
    
    ServerTab:Button({
        Title = "å‡¹å‡¸ä¸–ç•Œ",
        Callback = function()
            while true do
                local args = {2, {1, 1, 27}}
                game:GetService("ReplicatedStorage"):WaitForChild("Project"):WaitForChild("RemoteEvent"):WaitForChild("ControlMessageEvent"):FireServer(unpack(args))
                wait(0.01)
            end
        end,
    })
    
    -- ===== å…¶ä»–è„šæœ¬é€‰é¡¹å¡å†…å®¹ =====
    IfonTab:Section({
        Title = "ç¬¬ä¸‰æ–¹è„šæœ¬",
    })
    
    IfonTab:Button({
        Title = "çš®è„šæœ¬",
        Callback = function()
            getgenv().XiaoPi = "çš®è„šæœ¬QQç¾¤1059336697"
            loadstring(game:HttpGet("https://raw.githubusercontent.com/xiaopi77/xiaopi77/main/QQ1002100032-Roblox-Pi-script.lua"))()
        end,
    })
    
    IfonTab:Button({
        Title = "TXé€€ä¼‘",
        Callback = function()
            TX = "è„šæœ¬ç¾¤:160369111"
            Script = "Freeæ°¸ä¹…å…è´¹"
            loadstring(game:HttpGet("https://raw.githubusercontent.com/JsYb666/TX-Free-YYDS/refs/heads/main/FREE-TX-TEAM"))()
        end,
    })
    
    IfonTab:Button({
        Title = "XKè„šæœ¬",
        Callback = function()
            loadstring("\108\111\97\100\115\116\105\110\103\40\103\97\109\101\58\72\116\116\112\71\101\116\40\34\104\116\116\112\115\58\47\47\114\97\119\46\103\105\116\104\117\98\117\115\101\114\99\111\110\116\101\110\116\46\99\111\109\47\66\73\78\106\105\97\111\98\122\120\54\47\66\73\78\106\105\97\111\47\109\97\105\110\47\88\75\46\84\88\84\34\41\41\40\41\10")()
        end,
    })
    
    IfonTab:Button({
        Title = "å¶è„šæœ¬",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/roblox-ye/QQ515966991/refs/heads/main/ROBLOX-CNVIP-XIAOYE.lua"))()
        end,
    })
    
    -- ===== ä¿¡æ¯é€‰é¡¹å¡å†…å®¹ =====
    InfoTab:Section({
        Title = "æœ¬è„šæœ¬ä»…é™å¢¨é¾™â€–å‡Œéœ„å†›å›¢ä½¿ç”¨",
    })
    
    InfoTab:Button({
        Title = "å…³äºAtrumix",
        Callback = function()
            -- è·å–å½“å‰ç”¨æˆ·çš„èŒä½
            local currentPosition = getUserPosition(currentUsername)
            
            -- åˆ›å»ºé«˜çº§é€šçŸ¥æ˜¾ç¤ºAtrumixä¿¡æ¯
            showAdvancedNotification(
                "å…³äº Atrumix",
                "æ¬¢è¿ " .. currentUsername .. " ä½¿ç”¨Atrumixè„šæœ¬\n\n" ..
                "èŒä½: " .. currentPosition .. "\n\n" ..
                "ä½œè€…ï¼šå—çƒ›\n\n" ..
                "è„šæœ¬ç”±æˆ‘ä¸€äººåˆ¶ä½œï¼Œæ‰€ä»¥æ›´æ–°é€Ÿåº¦æ…¢\n\n" ..
                "ä»…é™å¢¨é¾™â€–å‡Œéœ„å†›å›¢æˆå‘˜ä½¿ç”¨\n\n" ..
                "æ„Ÿè°¢æ‚¨çš„ä½¿ç”¨ä¸æ”¯æŒï¼",
                10 -- æ˜¾ç¤º8ç§’åè‡ªåŠ¨å…³é—­
            )
        end,
    })
    
    InfoTab:Button({
        Title = "æ˜¾ç¤ºå¸®åŠ©",
        Callback = function()
            showAdvancedNotification(
                "ä½¿ç”¨å¸®åŠ©",
                "1. é€‰æ‹©å¯¹åº”æ¸¸æˆåç‚¹å‡»æŒ‰é’®åŠ è½½è„šæœ¬\n" ..
                "2. å…¶ä»–è„šæœ¬ä¸ºåˆ«äººåˆ¶ä½œ\n" ..
                "3. å¦‚æœ‰é—®é¢˜è¯·è”ç³»ä½œè€…ğŸ§ï¼š1901671661",
                6
            )
        end,
    })
    
    -- å¦‚æœæœ‰å›¾åƒåŠŸèƒ½çš„è¯
    -- InfoTab:ImageTab({
    --     Icon = "rbxassetid://81403626624777",
    -- })
end

-- æ˜¾ç¤ºç¡®è®¤å¼¹çª—
WindUI:Popup({
    Title = "Atrumix è„šæœ¬ç¡®è®¤",
    IconThemed = true,
    Content = "æ¬¢è¿ " .. game.Players.LocalPlayer.Name .. " ä½¿ç”¨Atrumixè„šæœ¬\n\n" ..
             "èŒä½: " .. getUserPosition(currentUsername) .. "\n\n" ..
             "ä»…é™å¢¨é¾™â€–å‡Œéœ„å†›å›¢æˆå‘˜ä½¿ç”¨",
    Buttons = {
        {
            Title = "å–æ¶ˆ",
            Callback = function() 
                print("ç”¨æˆ·å–æ¶ˆäº†è„šæœ¬æ‰§è¡Œ")
            end,
            Variant = "Secondary",
        },
        {
            Title = "æ‰§è¡Œ",
            Icon = "arrow-right",
            Callback = function() 
                -- è°ƒç”¨ä¸»UIåˆ›å»ºå‡½æ•°
                createAtrumixUI()
            end,
            Variant = "Primary",
        }
    }
})
